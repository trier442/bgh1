<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>배곧고1 기말대비 국어 실전 테스트</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        .tab {
            cursor: pointer;
            padding: 0.75rem 1.5rem;
            color: #4B5563;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        .tab:hover {
            background-color: #e5e7eb;
            color: #111827;
        }
        .tab.active {
            color: #4f46e5;
            border-bottom-color: #4f46e5;
            font-weight: 700;
        }
        .question-card {
            background-color: white;
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06);
        }
        .prose-box {
            background-color: #f9fafb;
            border: 1px solid #e5e7eb;
            padding: 1rem;
            margin-bottom: 1rem;
            border-radius: 0.5rem;
            font-size: 0.95em;
            line-height: 1.6;
        }
        .option-label {
            display: block;
            padding: 0.75rem 1rem;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .option-label:hover {
            background-color: #f3f4f6;
        }
        input[type="radio"]:checked + .option-label {
            background-color: #eef2ff;
            border-color: #4f46e5;
            color: #4f46e5;
            font-weight: 600;
        }
        input[type="radio"] {
            display: none;
        }
        .correct {
            background-color: #d1fae5 !important;
            border-color: #10b981 !important;
            color: #065f46 !important;
        }
        .incorrect {
            background-color: #fee2e2 !important;
            border-color: #ef4444 !important;
            color: #991b1b !important;
        }
        #submission-status {
            display: none;
            margin-top: 1rem;
            padding: 0.75rem;
            border-radius: 0.5rem;
            text-align: center;
        }
        #submission-status.success {
            background-color: #d1fae5;
            color: #065f46;
        }
        #submission-status.error {
            background-color: #fee2e2;
            color: #991b1b;
        }
    </style>
</head>
<body class="bg-gray-100">

    <div class="container mx-auto p-4 md:p-8">
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold text-gray-900">배곧고1 기말대비 국어 실전 테스트</h1>
        </header>

        <nav class="mb-8 bg-white rounded-lg shadow-md">
            <div id="tab-container" class="flex border-b border-gray-200">
                <!-- Tabs will be inserted here by JS -->
            </div>
        </nav>

        <main id="content-area">
            <!-- Test content will be loaded here -->
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 여기에 구글 앱 스크립트 배포 후 생성된 URL을 입력하세요.
            const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbx_ynKEZDywWqaBJ24QpXrq4GXCGqBj8y-sWmudD4ogKnr6pZdurJQlZQIQXqMviyXw/exec'; 

            const examData = {
                test1: {
                    title: '실전 테스트 1',
                    questions: [
                        { work: '정과정', type: '작품의 성격 파악', question: "「정과정」이 '충신연주지사'의 효시로 평가받는 이유로 가장 적절한 것은?", options: ["임금과 신하의 사랑을 직접적으로 노래했기 때문에", "유배지에서 임금을 그리워하는 신하의 마음을 여성 화자의 목소리에 빗대어 표현했기 때문에", "궁중 연회에서 널리 불리며 사랑받았기 때문에", "사랑하는 임과의 이별을 주제로 한 최초의 작품이기 때문에", "신하가 임금에게 자신의 잘못을 뉘우치는 내용이기 때문에"], answer: 1, explanation: "「정과정」은 유배 간 신하(정서)가 임금(의종)을 그리워하고 자신의 결백을 주장하는 마음을, 임과 이별한 여성 화자의 목소리를 빌려 표현한 '충신연주지사'의 시작으로 평가받습니다." },
                        { work: '정과정', type: '시어의 기능 파악', question: "「정과정」에서 화자가 자신의 처지와 비슷하다고 말한 '산(山) 접동새'에 대한 설명으로 가장 적절한 것은?", options: ["화자의 즐거운 마음을 드러내는 객관적 상관물이다.", "화자의 감정이 이입된 대상이자 한(恨)의 정서를 상징한다.", "임금의 위엄과 권위를 상징하는 소재이다.", "화자의 결백을 증명해 줄 수 있는 초월적 존재이다.", "화자에게 미래의 희망을 암시하는 복선이다."], answer: 1, explanation: "화자는 '내 님믈 그리사와 우니다니 / 산(山) 접동새 난 이슷하요이다'라고 말하며, 임을 그리워하며 우는 자신의 처지를 '접동새'에 빗대고 있습니다. 이는 자신의 슬픔을 대상에 이입한 감정 이입에 해당합니다." },
                        { work: '정석가', type: '핵심 표현 방법 파악', question: "「정석가」에서 화자가 임과의 영원한 사랑에 대한 소망을 드러내기 위해 사용한 주된 표현 방법은?", options: ["자연물에 빗대어 우회적으로 표현함", "실현 불가능한 상황을 설정하여 역설적으로 표현함", "과거와 현재를 대비하여 애상감을 고조함", "영웅적인 인물의 행적을 과장하여 표현함", "독백적 어조를 사용하여 내적 갈등을 드러냄"], answer: 1, explanation: "2~5연에서 화자는 '구운 밤에 싹이 나는 것', '옥 연꽃이 바위 위에서 피는 것' 등 현실에서 불가능한 상황을 설정하고, 그 상황이 실현되어야만 임과 이별하겠다고 말합니다. 이를 통해 결코 이별할 수 없다는 강한 의지를 역설적으로 보여줍니다." },
                        { work: '정석가', type: '시어의 의미 파악', question: "「정석가」의 6연에 등장하는 '구슬'과 '긴(끈)'은 각각 무엇을 상징하는가?", options: ["임금과 신하", "이별과 재회", "사랑과 믿음", "기쁨과 슬픔", "부귀와 공명"], answer: 2, explanation: "'구스리 바회예 디신달 / 긴힛단 그츠리잇가'라는 구절은 구슬이 바위에 떨어져 깨지더라도 끈은 끊어지지 않는다는 의미입니다. 여기서 '구슬'은 깨지기 쉬운 사랑을, '긴(끈)'은 변치 않는 믿음을 상징합니다." },
                        { work: '상춘곡', type: '갈래의 특징', question: "정극인의 「상춘곡」이 '은일 가사' 또는 '강호 한정가'로 불리는 이유로 가장 적절한 것은?", options: ["전쟁의 비극과 평화에 대한 염원을 노래했기 때문에", "현실 정치에서 물러나 자연에 묻혀 사는 한가로운 즐거움을 노래했기 때문에", "농민들의 고달픈 삶과 애환을 사실적으로 노래했기 때문에", "학문 수양에 정진하겠다는 강한 의지를 노래했기 때문에", "아름다운 우리 국토를 여행하며 느낀 감회를 노래했기 때문에"], answer: 1, explanation: "「상춘곡」은 속세('홍진')를 떠나 자연('산림')에 묻혀 봄의 경치를 즐기는 한가로운 삶의 흥취와 안빈낙도의 정신을 노래하므로 '은일 가사' 혹은 '강호 한정가'의 효시로 평가됩니다." },
                        { work: '상춘곡', type: '화자의 태도 파악', passage: "공명(功名)도 날 ᄭᅴ우고, 부귀(富貴)도 날 ᄭᅴ우니, / 청풍명월(淸風明月) 외(外)에 엇던 벗이 잇사올고. / 단표누항(簞瓢陋巷)에 흣튼 혜음 아니 ㅎㆍ니, / 아모타 백년행락(百年行樂)이 이만헌들 엇지리.", question: "위 구절에 드러난 화자의 가치관으로 가장 적절한 것은?", options: ["안빈낙도(安貧樂道)", "우국충정(憂國衷情)", "수구초심(首丘初心)", "결초보은(結草報恩)", "절치부심(切齒腐心)"], answer: 0, explanation: "화자는 공명과 부귀 같은 세속적 가치가 자신을 꺼린다고 표현하며, 가난한 삶('단표누항') 속에서도 헛된 생각을 하지 않고 자연('청풍명월')을 벗 삼아 평생의 즐거움을 누리겠다고 말합니다. 이는 가난 속에서도 도를 즐기는 '안빈낙도'의 태도를 잘 보여줍니다." },
                        { work: '이생규장전', type: '작품의 성격', question: "「이생규장전」이 '전기(傳奇) 소설'로 분류되는 가장 결정적인 이유는 무엇인가?", options: ["전쟁을 배경으로 하고 있어서", "남녀 간의 애절한 사랑을 다루어서", "등장인물의 감정을 시로 표현해서", "현실에서 일어나기 어려운 기이한 사건을 다루어서", "중국, 일본 등 외국을 배경으로 해서"], answer: 3, explanation: "'전기(傳奇)'란 기이한 것을 전한다는 뜻입니다. 이 작품에서 죽은 최 씨가 환신하여 이생과 다시 만나 사랑을 나누는 비현실적이고 기이한 사건 설정이 바로 전기 소설의 특징을 잘 보여주는 부분입니다." },
                        { work: '이생규장전', type: '인물의 성격 파악', question: "「이생규장전」에서 '최 씨'가 보여주는 성격으로 가장 두드러진 것은?", options: ["운명에 순응하는 소극적인 태도", "부모의 뜻을 거역하지 못하는 순종적인 태도", "자신의 사랑과 운명을 스스로 개척하는 적극적인 태도", "물질적 가치를 중시하는 현실적인 태도", "신분 상승에 대한 강한 욕망을 지닌 태도"], answer: 2, explanation: "최 씨는 이생에게 먼저 편지를 보내 마음을 표현하고, 상사병에 걸려 부모를 설득하여 이생과의 혼인을 성사시키는 등, 자신의 사랑을 쟁취하기 위해 적극적으로 행동하는 주체적인 여성으로 그려집니다." },
                        { work: '작품 비교', type: '갈래상의 공통점', question: "「정과정」과 「정석가」의 공통점으로 가장 적절한 것은?", options: ["작가가 명확하게 밝혀져 있다.", "임금에 대한 충성을 노래한 충신연주지사이다.", "3음보 율격과 후렴구가 나타나는 고려 가요이다.", "유배지에서 창작된 유배 문학이다.", "모두 10구체 향가의 형식을 계승했다."], answer: 2, explanation: "두 작품 모두 3음보의 율격을 기반으로 하며, '아으'나 '딩아돌하 당금에 계샹이다'와 같은 후렴구(여음구)가 나타나는 고려 가요의 형식적 특징을 공유합니다." },
                        { work: '작품 비교', type: '주제 의식 비교', question: "「정과정」과 「상춘곡」의 화자가 공통적으로 추구하는 가치는?", options: ["임금에 대한 변함없는 충성", "자연 속에서의 풍류와 즐거움", "세속적 명예와 부귀", "죽음을 초월한 영원한 사랑", "현실 정치에 대한 비판"], answer: 0, explanation: "「정과정」의 화자는 유배지에서도 임을 향한 충절을 노래하고, 「상춘곡」의 화자는 자연을 즐기는 것도 임금의 은혜('역군은이샷다')라고 말합니다. 두 화자 모두 유학자로서 임금에 대한 충성심을 바탕에 깔고 있습니다." },
                        { work: '작품 비교', type: '표현 방식 비교', question: "「정석가」의 '불가능한 상황 설정'과 「이생규장전」의 '죽은 여인과의 재회'는 공통적으로 어떤 효과를 거두고 있는가?", options: ["주제의 비극성을 강조한다.", "작가의 현실 비판 의식을 드러낸다.", "화자의 소망이 실현 불가능함을 보여준다.", "현실의 한계를 넘어서는 절대적 가치를 강조한다.", "작품에 해학성과 풍자성을 부여한다."], answer: 3, explanation: "「정석가」는 불가능한 상황 설정을 통해 '영원한 사랑'이라는 절대적 가치를, 「이생규장전」은 죽은 여인과의 사랑을 통해 '죽음을 초월한 사랑'이라는 절대적 가치를 강조합니다. 둘 다 현실의 한계를 뛰어넘는 가치를 다루고 있습니다." },
                        { work: '작품 비교', type: '자연물의 기능 비교', question: "「정과정」의 '접동새'와 「상춘곡」의 '수풀에 우는 새'의 공통점은?", options: ["화자의 감정이 이입된 대상이다.", "화자의 외로움을 심화시킨다.", "화자에게 깨달음을 주는 존재이다.", "화자의 결백을 증명하는 존재이다.", "화자가 추구하는 이상향을 상징한다."], answer: 0, explanation: "「정과정」의 화자는 자신의 슬픈 처지를 접동새에 이입하고, 「상춘곡」의 화자는 봄의 흥취를 이기지 못해 우는 새에 자신의 흥겨운 감정을 이입합니다. 둘 다 화자의 감정이 이입된 대상입니다." },
                        { work: '상춘곡', type: '시상 전개 방식', question: "「상춘곡」의 시상 전개 방식에 대한 설명으로 가장 적절한 것은?", options: ["시간의 흐름에 따라 계절의 변화를 보여준다.", "화자의 시선과 공간의 이동에 따라 전개된다.", "과거와 현재를 대비하여 주제를 강조한다.", "중심 사건을 바탕으로 인물 간의 갈등을 보여준다.", "문답 형식을 통해 자연의 이치를 설명한다."], answer: 1, explanation: "화자의 공간은 '수간모옥(집 안)'에서 '정자', '시냇가'를 거쳐 '산봉우리(집 밖)'로 점차 확대됩니다. 이처럼 화자의 시선과 공간의 이동에 따라 시상이 전개되는 것이 특징입니다." },
                        { work: '이생규장전', type: '삽입 시의 역할', passage: "창과 방패가 눈에 가득한 싸움터 / 옥이 부서지고 꽃도 흩날리고 원앙도 짝을 잃네. (...) 이제 한번 이별하면 둘 사이 아득하니 / 하늘과 인간 사이에 소식마저 막히리라.", question: "위와 같은 삽입 시의 주된 기능으로 가장 적절한 것은?", options: ["사건의 진행 속도를 빠르게 한다.", "앞으로 일어날 사건을 미리 요약한다.", "등장인물의 정서를 함축적으로 드러낸다.", "객관적인 정보를 전달하여 사실성을 높인다.", "작품의 분위기를 희극적으로 전환한다."], answer: 2, explanation: "삽입 시는 인물의 복잡한 심리나 정서를 운문 형식으로 압축하여 효과적으로 전달하는 역할을 합니다. 위 시는 최 씨가 이생과의 영원한 이별을 앞두고 느끼는 슬픔과 절망감을 함축적으로 보여줍니다." },
                        { work: '정과정', type: '어조 파악', question: "「정과정」에서 '아소 님하, 도람 드르샤 괴오쇼셔'라는 구절에 가장 잘 드러난 화자의 어조는?", options: ["체념적 어조", "비판적 어조", "낙관적 어조", "간절한 애원의 어조", "해학적 어조"], answer: 3, explanation: "'아소 님하'는 10구체 향가의 낙구에 해당하는 감탄사로, '아아, 임이시여'라는 의미입니다. 임에게 자신의 말을 다시 들어주고 사랑해달라고 호소하는 것으로, 간절한 애원의 어조가 담겨 있습니다." },
                        { work: '정석가', type: '작품의 구조', question: "「정석가」의 1연(서사)이 다른 연과 내용상 이질적인 이유는 무엇인가?", options: ["궁중 음악으로 편입되면서 후대에 덧붙여진 부분이기 때문에", "원래 다른 작품의 일부였기 때문에", "작가가 의도적으로 독자에게 혼란을 주기 위해", "임금에 대한 비판을 숨기기 위해", "당시 유행하던 노래 가사를 그대로 차용했기 때문에"], answer: 0, explanation: "1연의 '션왕셩대예 노니와지이다(태평성대에 놀고 싶습니다)'라는 내용은 임과의 영원한 사랑을 노래하는 전체 내용과 다소 거리가 있습니다. 이는 민요로 불리던 노래가 궁중 음악으로 수용되면서, 나라의 태평성대를 기원하는 내용이 덧붙여진 것으로 봅니다." },
                        { work: '상춘곡', type: '시어의 의미', question: "「상춘곡」에서 화자가 머물고 있는 자연과 대비되는 '속세'를 의미하는 시어는?", options: ["산림(山林)", "홍진(紅塵)", "벽계수(碧溪水)", "청풍명월(淸風明月)", "녹양방초(綠楊芳草)"], answer: 1, explanation: "'홍진'은 '붉은 먼지'라는 뜻으로, 번거롭고 속된 세상을 비유적으로 이르는 말입니다. 화자는 이 '홍진'에 묻혀 사는 사람들과 달리 '산림'에 묻혀 사는 자신의 삶에 자부심을 느낍니다." },
                        { work: '이생규장전', type: '갈등의 원인', question: "「이생규장전」에서 이생과 최 씨가 겪는 모든 이별과 시련의 근본적인 원인은 무엇인가?", options: ["부모님의 반대", "신분의 차이", "성격 차이로 인한 갈등", "전쟁(홍건적의 난)", "죽음이라는 운명"], answer: 3, explanation: "부모의 반대는 극복되었지만, '홍건적의 난'이라는 전쟁이 일어나면서 두 사람은 생사를 넘나드는 이별과 고통을 겪게 됩니다. 따라서 모든 시련의 근본 원인은 전쟁입니다." },
                        { work: '정과정', type: '문학사적 의의', question: "「정과정」이 문학사적으로 지니는 의의로 적절하지 않은 것은?", options: ["고려 가요 중 작가가 알려진 유일한 작품이다.", "충신이 임금을 그리워하는 '충신연주지사'의 효시이다.", "우리나라 최초의 유배 문학으로 평가받는다.", "향가의 형식이 남아있는 향가계 고려 가요이다.", "민요적 율격인 3음보가 처음으로 나타난 작품이다."], answer: 4, explanation: "3음보는 고려 가요의 보편적인 율격으로, 「정과정」에서 처음 나타난 것은 아닙니다. 나머지 선택지는 모두 「정과정」의 중요한 문학사적 의의에 해당합니다." },
                        { work: '정석가', type: '다른 작품과의 관계', question: "「정석가」의 마지막 연은 다른 고려 가요인 어떤 작품과 내용이 매우 유사한가?", options: ["가시리", "청산별곡", "동동", "서경별곡", "쌍화점"], answer: 3, explanation: "「정석가」의 6연은 '구스리 바회예 디신달...'로 시작하며, 이는 「서경별곡」의 2연과 거의 동일합니다. 이를 통해 당시 유행하던 구절이 구전 과정에서 삽입되었음을 알 수 있습니다." },
                        { work: '상춘곡', type: '화자의 심리', passage: "수풀에 우는 새는 춘기(春氣)를 못내 계워 소리마다 교태(嬌態)로다.", question: "위 구절을 통해 알 수 있는 화자의 심리 상태는?", options: ["자연의 섭리에 대한 경외감", "봄을 맞아 느끼는 흥겨움과 즐거움", "홀로 있는 외로움과 쓸쓸함", "속세에 대한 미련과 아쉬움", "새의 아름다운 소리에 대한 질투"], answer: 1, explanation: "화자는 봄기운을 이기지 못해 아양을 떨며 우는 새의 모습에 자신의 흥겨운 감정을 이입하고 있습니다. 즉, 봄을 맞이하여 느끼는 즐거움과 만족감을 표현한 구절입니다." },
                        { work: '이생규장전', type: '결말의 특징', question: "「이생규장전」의 결말이 당대 다른 고전 소설과 비교하여 가지는 특징은?", options: ["행복한 결말을 통해 독자에게 교훈을 준다.", "권선징악의 주제를 명확하게 보여준다.", "주인공이 신선이 되어 오래도록 행복하게 산다.", "모든 갈등이 해소되지 않은 채 열린 결말로 끝난다.", "주인공의 죽음으로 끝나는 비극적 결말을 취한다."], answer: 4, explanation: "대부분의 고전 소설이 '행복하게 잘 살았다'는 식의 행복한 결말로 끝나는 것과 달리, 「이생규장전」은 최 씨와의 영원한 이별 후 이생마저 병을 얻어 죽는 비극적 결말로 끝납니다. 이는 운명의 한계를 극복하지 못하는 인간의 모습을 보여주어 깊은 여운을 남깁니다." },
                        { work: '작품 비교', type: '자연관 비교', question: "「상춘곡」의 '자연'과 「한거십팔곡」의 '자연'이 지니는 공통적인 의미는?", options: ["현실 도피를 위한 일시적인 공간", "농사일을 해야 하는 노동의 공간", "세속적 가치를 실현하는 공간", "정치적 이상을 펼치는 공간", "속세를 벗어나 풍류를 즐기는 은일의 공간"], answer: 4, explanation: "두 작품의 화자는 모두 현실 정치(속세)에서 벗어나 자연에 은거하며, 그 속에서 안빈낙도하고 풍류를 즐기는 것을 삶의 큰 가치로 여기고 있습니다. 따라서 자연은 '은일의 공간'이라는 공통점을 지닙니다." },
                        { work: '작품 비교', type: '주제 구현 방식', question: "「고공가」와 「양반전」이 당대 사회를 비판하기 위해 공통적으로 사용한 표현 방식은?", options: ["반어", "역설", "설의", "풍자", "과장"], answer: 3, explanation: "「고공가」는 무능한 관리를 '머슴'에, 「양반전」은 양반의 허례허식과 횡포를 '매매 증서'라는 형식을 통해 간접적으로 비판합니다. 이처럼 대상을 우스꽝스럽게 묘사하거나 돌려서 비판하는 '풍자'의 방식이 공통적으로 사용되었습니다." },
                        { work: '정과정', type: '구절의 의미 해석', passage: "벼기더시니 뉘러시니잇가.", question: "위 구절에 담긴 화자의 심정으로 가장 적절한 것은?", options: ["자신의 잘못을 뉘우치는 반성", "자신을 모함한 존재에 대한 원망", "임금의 판단에 대한 불신", "미래에 대한 막연한 불안감", "유배 생활의 외로움과 슬픔"], answer: 1, explanation: "'벼기더시니'는 '우기던 이', '헐뜯던 이' 등으로 해석됩니다. 즉, 화자는 자신의 죄가 누군가의 모함 때문이라고 생각하며 그 대상에 대한 원망과 자신의 결백함을 드러내고 있습니다." }
                    ]
                },
                test2: {
                    title: '실전 테스트 2',
                    questions: [
                        { work: '상춘곡', type: '작품의 구조', question: "「상춘곡」에서 화자의 시선이 이동하는 공간의 순서로 가장 적절한 것은?", options: ["산봉우리 → 시냇가 → 수간모옥", "수간모옥 → 정자 → 시냇가 → 산봉우리", "들판 → 산봉우리 → 시냇가", "시냇가 → 수간모옥 → 산봉우리", "정자 → 산봉우리 → 수간모옥"], answer: 1, explanation: "화자의 시선은 집 안인 '수간모옥'에서 시작하여 '정자', '시냇가'를 거쳐 가장 넓은 공간인 '산봉우리'로 이동하며 점차 확장되는 구조를 보입니다." },
                        { work: '이생규장전', type: '갈등의 유형', question: "「이생규장전」에서 이생과 최 씨의 첫 번째 이별의 원인이 된 갈등은 무엇인가?", options: ["개인과 사회(전쟁)의 갈등", "개인과 개인(부모)의 갈등", "개인의 내적 갈등", "개인과 운명의 갈등", "인간과 자연의 갈등"], answer: 1, explanation: "이생과 최 씨의 첫 번째 이별은 두 사람의 사랑을 반대하는 이생 아버지와의 갈등, 즉 개인과 개인 간의 갈등에서 비롯되었습니다." },
                        { work: '정석가', type: '시구의 의미', question: "「정석가」에서 '므쇠로 한 쇼를 디여다가 / 털슈산(鐵樹山)에 노호이다'라는 구절이 의미하는 것은?", options: ["농사의 풍요를 기원함", "불가능한 상황을 설정하여 이별을 거부함", "강한 국방력에 대한 소망을 드러냄", "무쇠로 소를 만드는 뛰어난 기술력을 과시함", "자연을 훼손하는 인간의 어리석음을 비판함"], answer: 1, explanation: "쇠로 만든 소를 쇠로 된 나무가 있는 산에 놓는다는 것은, 그 소가 쇠로 된 풀을 먹어야 한다는 다음 구절과 연결되어 현실적으로 불가능한 상황을 설정한 것입니다. 이를 통해 임과 이별하지 않겠다는 강한 의지를 역설적으로 표현합니다." },
                        { work: '정과정', type: '화자의 태도', passage: "아니시며 거츠르신 둘 아으 / 잔월효성(殘月曉星)이 아라시리이다.", question: "위 구절에 드러난 화자의 태도는?", options: ["자신의 결백함을 자연물에 호소하고 있다.", "임에 대한 원망을 직접적으로 표출하고 있다.", "자연의 아름다움을 예찬하고 있다.", "달과 별에게 소원을 빌고 있다.", "자신의 잘못을 뉘우치고 있다."], answer: 0, explanation: "화자는 (자신에 대한 참소가) 옳지 않고 거짓이라는 것을 오직 지는 달과 새벽 별만이 알 것이라고 말하며, 결백함을 자연물에 빗대어 호소하고 있습니다." },
                        { work: '상춘곡', type: '공간의 대비', question: "「상춘곡」에서 화자가 사는 '산림(山林)'과 대비되는 의미를 지니는 공간은?", options: ["무릉(武陵)", "벽계수(碧溪水)", "홍진(紅塵)", "봉두(峰頭)", "녹양방초(綠楊芳草)"], answer: 2, explanation: "'홍진'은 붉은 먼지, 즉 번거롭고 속된 인간 세상을 의미하는 단어로, 화자가 머무는 탈속적인 공간인 '산림'(자연)과 대조를 이룹니다." },
                        { work: '이생규장전', type: '소재의 상징성', passage: "그 뒤 이생은 벼슬을 구하지 않고 최 씨와 함께 살았다. 목숨을 구하고자 달아났던 종들도 다시 스스로 돌아왔다. 이생은 이때부터 인간사에 게을러져서 비록 친척이나 손님들의 길흉사에 하례하고 조문해야 할 일이 있더라도 문을 걸어 잠그고 밖으로 나가지 않았다.", question: "위와 같은 이생의 행동이 의미하는 바로 가장 적절한 것은?", options: ["현실 세계에 대한 미련과 집착", "죽은 아내를 잊고 새로운 삶을 준비함", "세속적인 삶을 버리고 아내와의 사랑에만 집중함", "전쟁의 충격으로 인한 정신적 혼란", "가문을 일으키기 위한 노력"], answer: 2, explanation: "죽은 아내와 재회한 이생은 벼슬을 구하지 않고 세상과의 교류를 끊은 채 오직 아내와의 사랑을 나누는 데에만 집중합니다. 이는 세속적 가치보다 사랑을 중시하는 그의 태도를 보여줍니다." },
                        { work: '정석가', type: '다른 작품과의 관계', question: "「정석가」의 6연 '구스리 바회예 디신달...' 부분은 어떤 다른 고려 가요의 일부와 내용 및 형식이 매우 유사한가?", options: ["청산별곡", "가시리", "서경별곡", "동동", "만전춘별사"], answer: 2, explanation: "해당 부분은 「서경별곡」 2연과 거의 동일합니다. 이는 당시 민중 사이에서 널리 유행하던 구절이 구전 과정에서 여러 노래에 삽입되었음을 보여주는 증거입니다." },
                        { work: '정과정', type: '주제 의식', question: "「정과정」의 주제 의식을 가장 잘 나타낸 것은?", options: ["자연 속에서의 풍류와 안빈낙도", "이별한 임에 대한 원망과 체념", "임금을 향한 변함없는 충절과 결백의 호소", "인생무상과 허무감의 극복 의지", "봉건적 사회 제도에 대한 비판"], answer: 2, explanation: "이 작품은 유배지에서 임금에 대한 변함없는 충성심을 맹세하고, 자신의 결백함을 알아주기를 간절히 바라는 마음을 노래한 충신연주지사입니다." },
                        { work: '상춘곡', type: '작품의 문학사적 의의', question: "「상춘곡」이 국문학사에서 갖는 가장 중요한 의의는 무엇인가?", options: ["최초의 시조이다.", "최초의 한문 소설이다.", "최초의 경기체가이다.", "최초의 사설시조이다.", "최초의 양반 가사이다."], answer: 4, explanation: "「상춘곡」은 정극인이 지은 작품으로, 현재 전하는 것 중 가장 오래된 가사 작품이며, 특히 사대부가 지은 양반 가사의 효시로 평가받습니다. 이후 강호가도의 흐름을 열었습니다." },
                        { work: '이생규장전', type: '인물의 태도', passage: "차라리 죽어 승냥이와 이리의 배 속에 들어갈지언정 어찌 개돼지 같은 놈의 짝이 되겠느냐.", question: "위와 같은 최 씨의 말에서 드러나는 태도로 가장 적절한 것은?", options: ["운명에 순응하는 체념적 태도", "목숨을 소중히 여기는 현실적 태도", "죽음으로 절개를 지키려는 강인한 의지", "적에게 연민을 느끼는 인도주의적 태도", "이생에 대한 원망과 배신감"], answer: 2, explanation: "최 씨는 자신을 겁탈하려는 홍건적에게 죽음을 택할지언정 절개를 더럽힐 수 없다고 말하며, 정절을 목숨보다 소중히 여기는 강인하고 결단력 있는 모습을 보여줍니다." },
                        { work: '작품 비교', type: '화자의 처지', question: "「정과정」의 화자와 「상춘곡」의 화자가 공통적으로 처한 상황은?", options: ["전쟁으로 인해 가족과 헤어진 상황", "임금의 명을 받아 왜적과 싸우는 상황", "현실 정치(속세)에서 벗어나 있는 상황", "가난 때문에 굶주림에 시달리는 상황", "사랑하는 임과 이별하여 슬퍼하는 상황"], answer: 2, explanation: "「정과정」의 화자는 유배를 와 속세를 떠나 있고, 「상춘곡」의 화자는 벼슬을 그만두고 자연에 은거하고 있습니다. 두 화자 모두 현실 정치에서 벗어나 있다는 공통점이 있습니다." },
                        { work: '작품 비교', type: '작품의 분위기', question: "다음 중, 작품의 전반적인 분위기가 가장 낙관적이고 흥겨운 것은?", options: ["정과정", "이생규장전", "상춘곡", "정석가"], answer: 2, explanation: "「상춘곡」은 봄의 아름다움을 만끽하며 자연 속에서 느끼는 흥취와 만족감을 노래하므로, 다른 작품들에 비해 분위기가 가장 밝고 낙관적입니다." },
                        { work: '정과정', type: '표현상의 특징', question: "「정과정」에 대한 설명으로 옳은 것은?", options: ["3음보 율격으로 민요적 성격이 강하다.", "반어적 표현을 통해 임에 대한 그리움을 드러낸다.", "시간의 흐름에 따라 시상이 전개된다.", "자연과 속세의 대비가 선명하게 나타난다.", "영웅적인 인물의 일대기를 서술하고 있다."], answer: 0, explanation: "「정과정」은 '내 님믈 / 그리사와 / 우니다니'와 같이 3음보 율격을 기반으로 하고 있어, 민요적 성격을 지닌 고려 가요의 특징을 잘 보여줍니다." },
                        { work: '정석가', type: '화자의 태도', question: "「정석가」 2~5연에 반복적으로 나타나는 '유덕(有德)하신 님믈 여희아와지이다'라는 구절을 통해 알 수 있는 화자의 태도는?", options: ["임에 대한 원망", "이별에 대한 체념", "자신의 처지에 대한 한탄", "사랑에 대한 강한 의지와 확신", "재회에 대한 막연한 기대"], answer: 3, explanation: "불가능한 상황이 실현되어야만 이별하겠다는 이 구절은, 결코 이별할 수 없다는 화자의 강한 의지와 영원한 사랑에 대한 확신을 반어적으로 보여주는 표현입니다." },
                        { work: '상춘곡', type: '시어의 의미', passage: "녹양방초(綠楊芳草)는 세우(細雨) 중에 프르도다.", question: "위 구절이 묘사하는 계절적 배경으로 가장 적절한 것은?", options: ["봄", "여름", "가을", "겨울", "초저녁"], answer: 0, explanation: "'녹양방초'는 푸른 버들과 향기로운 풀을 의미하며, '세우'는 가랑비를 뜻합니다. 푸른 풀과 버들이 가랑비에 젖어 있는 모습은 전형적인 봄의 풍경입니다." },
                        { work: '이생규장전', type: '인물의 관계', question: "「이생규장전」에서 이생과 그의 아버지의 관계는 주로 어떤 양상으로 나타나는가?", options: ["존경과 신뢰", "대립과 갈등", "무관심과 방치", "협력과 지지", "애증과 연민"], answer: 1, explanation: "이생의 아버지는 아들의 자유로운 연애를 반대하고 그를 지방으로 보내는 등, 당대의 유교적 가치관에 따라 아들과 대립하고 갈등하는 엄격한 아버지의 모습을 보여줍니다." },
                        { work: '작품 비교', type: '사랑의 성격', question: "「정과정」과 「정석가」는 모두 임에 대한 사랑을 노래한다. 두 작품에 나타난 사랑의 성격에 대한 설명으로 가장 적절한 것은?", options: ["「정과정」은 체념적, 「정석가」는 의지적이다.", "「정과정」은 현실적, 「정석가」는 낭만적이다.", "두 작품 모두 이별을 거부하는 적극적인 태도를 보인다.", "「정과정」은 남성적 어조, 「정석가」는 여성적 어조를 사용한다.", "두 작품 모두 변함없는 충정과 믿음을 바탕으로 한다."], answer: 4, explanation: "「정과정」은 임(임금)에 대한 변함없는 충성을, 「정석가」는 임(연인)에 대한 영원한 믿음을 노래합니다. 대상은 다를 수 있으나, 두 작품 모두 변치 않는 마음을 핵심으로 한다는 공통점이 있습니다." },
                        { work: '작품 비교', type: '화자의 상황', question: "「상춘곡」의 화자와 「이생규장전」의 이생이 공통적으로 보이는 태도는?", options: ["현실 정치에 적극적으로 참여하려는 태도", "자연의 아름다움을 예찬하는 태도", "세속적인 가치에 대해 거리를 두려는 태도", "신분 제도의 모순을 비판하는 태도", "전쟁의 비극을 극복하려는 의지"], answer: 2, explanation: "「상춘곡」의 화자는 '공명도 날 ᄭᅴ우고'라며 속세와 거리를 두고, 「이생규장전」의 이생은 아내와 재회한 후 '인간사에 게을러져서' 벼슬을 구하지 않습니다. 두 인물 모두 세속적 가치로부터 벗어나려는 태도를 보입니다." },
                        { work: '작품 비교', type: '작가의식', question: "「이생규장전」과 「상춘곡」에 대한 설명으로 옳지 않은 것은?", options: ["「이생규장전」은 비극적 결말로 끝난다.", "「상춘곡」은 자연 속에서의 삶에 대한 만족감을 드러낸다.", "두 작품 모두 조선 전기에 창작되었다.", "두 작품 모두 남성 사대부에 의해 창작되었다.", "두 작품 모두 임금에 대한 충성심을 직접적으로 드러낸다."], answer: 4, explanation: "「이생규장전」은 남녀 간의 사랑에 집중하며 임금에 대한 충성심을 직접적으로 드러내지 않습니다. 반면, 「상춘곡」은 마지막 부분에서 자연을 즐기는 것이 임금의 은혜라고 말하며 충의를 드러냅니다." },
                        { work: '정석가', type: '시구의 의미', passage: "구스리 바회예 디신달 / 긴힛단 그츠리잇가.", question: "위 구절과 유사한 의미를 담고 있는 속담으로 가장 적절한 것은?", options: ["옥에 티", "구슬이 서 말이라도 꿰어야 보배", "깨진 거울은 다시 비치지 않는다", "하늘이 무너져도 솟아날 구멍이 있다", "닭 쫓던 개 지붕 쳐다본다"], answer: 1, explanation: "구슬(사랑)이 깨지더라도 끈(믿음)은 끊어지지 않는다는 의미는, 본질적인 관계는 쉽게 변하지 않는다는 뜻입니다. 이는 '구슬이 서 말이라도 꿰어야 보배'라는 속담처럼, 개별적인 것들이 연결되어야 진정한 가치를 지닌다는 의미와 통하는 면이 있습니다. (정확히 일치하는 속담은 아니지만, 관계의 중요성 측면에서 가장 가깝습니다.)" },
                        { work: '정과정', type: '화자의 심정', question: "「정과정」의 화자가 자신의 결백을 알아줄 존재로 '달과 별'을 언급한 이유는?", options: ["달과 별이 신성한 힘을 가졌다고 믿어서", "자신의 억울함을 들어줄 사람이 아무도 없기 때문에", "밤에 잠 못 이루는 자신의 처지를 드러내기 위해", "임금도 달과 별을 보고 자신을 떠올리기를 바라기 때문에", "자연의 영원함과 대비되는 인간사의 유한함을 강조하기 위해"], answer: 1, explanation: "화자는 자신의 억울함을 사람들이 믿어주지 않는 상황에서, 하늘 높이 떠서 모든 것을 내려다보는 영원한 존재인 달과 별만이 자신의 진심을 알아줄 것이라고 호소합니다. 이는 자신의 결백을 들어줄 이가 없는 극한의 고독과 억울함을 표현한 것입니다." },
                        { work: '상춘곡', type: '시어의 기능', passage: "도화(桃花)ㅣ로다. 무릉(武陵)이 갓갑도다. 뎌 메이 긘 거인고.", question: "화자가 '도화'를 보고 '무릉'을 떠올리는 것은 어떤 사고 과정에 해당하는가?", options: ["분석", "비판", "종합", "연상", "추리"], answer: 3, explanation: "복숭아꽃(도화)이라는 구체적인 사물을 보고, 그와 관련된 이야기인 무릉도원이라는 이상향을 떠올리는 것은 연상 작용에 해당합니다." },
                        { work: '이생규장전', type: '작품의 주제', question: "「이생규장전」을 통해 작가가 궁극적으로 말하고자 하는 바로 가장 적절한 것은?", options: ["전쟁의 참혹함과 비인간성 고발", "신분 질서의 중요성과 유지의 필요성", "죽음도 갈라놓을 수 없는 남녀 간의 숭고한 사랑", "유교적 이념에 충실한 삶의 가치", "인간의 의지로 운명을 극복할 수 있다는 희망"], answer: 2, explanation: "이 작품은 전쟁과 죽음이라는 극한의 장애물에도 불구하고 끝까지 이어지는 이생과 최 씨의 사랑을 통해, 현실의 한계를 초월하는 숭고하고 절대적인 사랑의 가치를 가장 중심적으로 이야기하고 있습니다." },
                        { work: '작품 비교', type: '공간의 기능', question: "「상춘곡」의 '수간모옥'과 「정석가」의 '바회'는 각각 화자에게 어떤 공간으로 기능하는가?", options: ["안식의 공간 - 시련의 공간", "풍류의 공간 - 노동의 공간", "현실의 공간 - 이상의 공간", "만족의 공간 - 갈등의 공간", "일상의 공간 - 상상의 공간"], answer: 0, explanation: "「상춘곡」의 '수간모옥'은 화자가 안빈낙도를 누리는 안식처이자 만족의 공간입니다. 반면 「정석가」의 '바회(바위)'는 옥 연꽃이 피어야 하는 불가능한 시련의 공간으로 설정되어 있습니다." },
                        { work: '작품 비교', type: '후렴구의 기능', question: "「정과정」의 '아으'와 「정석가」의 '딩아돌하 당금에 계샹이다'가 가지는 공통적인 기능이 아닌 것은?", options: ["연과 연을 구분하는 분연의 기능", "음악적 흥취와 리듬감을 부여하는 기능", "시의 구조적 안정감을 주는 기능", "화자의 정서를 집약하고 강조하는 기능", "내용상 핵심 의미를 전달하는 기능"], answer: 4, explanation: "고려 가요의 후렴구는 대체로 내용상 특별한 의미를 지니기보다는, 음악적 효과(리듬감, 흥취)를 높이고 연을 나누는 형식적 기능을 주로 수행합니다. 따라서 핵심 의미를 전달하는 기능은 거리가 멉니다." }
                    ]
                }
            };
        
            const tabContainer = document.getElementById('tab-container');
            const contentArea = document.getElementById('content-area');

            function renderTest(testId, test) {
                let questionsHtml = '';
                test.questions.forEach((q, index) => {
                    const optionsHtml = q.options.map((opt, i) => `
                        <div class="mt-2">
                            <input type="radio" name="question${index}" id="q${index}o${i}" value="${i}">
                            <label for="q${index}o${i}" class="option-label">
                               <span class="font-mono mr-2">${i + 1}</span> ${opt}
                            </label>
                        </div>
                    `).join('');
                    questionsHtml += `
                        <div class="question-card" data-work="${q.work}" data-type="${q.type}" data-answer="${q.answer}">
                            <h3 class="font-semibold text-lg mb-2 text-gray-800">${index + 1}. ${q.question}</h3>
                            ${q.passage ? `<div class="prose-box"><p>${q.passage}</p></div>` : ''}
                            <div class="space-y-2">${optionsHtml}</div>
                        </div>
                    `;
                });
                
                contentArea.innerHTML = `
                    <div id="test-container">
                        <div class="bg-white p-6 rounded-lg shadow-md mb-8">
                            <label for="student-name" class="block text-lg font-semibold text-gray-700 mb-2">이름을 입력하세요:</label>
                            <input type="text" id="student-name" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" placeholder="이름">
                        </div>
                        ${questionsHtml}
                        <div class="text-center mt-8">
                            <button id="submit-btn" class="bg-indigo-600 text-white font-bold py-3 px-8 rounded-lg text-lg hover:bg-indigo-700 transition duration-300">제출하기</button>
                        </div>
                    </div>
                    <div id="result-container" class="hidden"></div>
                `;
                
                document.getElementById('submit-btn').addEventListener('click', () => handleSubmit(testId));
            }

            function renderResults(name, score, correctCount, questions, userAnswers, weakestWork, weakestType) {
                let detailedResultsHtml = '<h3 class="text-2xl font-bold text-gray-800 mb-6 border-b pb-3">상세 해설</h3>';
                questions.forEach((q, index) => {
                    const userAnswer = userAnswers[index];
                    const isCorrect = userAnswer === q.answer;
                    
                    const optionsHtml = q.options.map((opt, i) => {
                        let labelClass = "option-label";
                        if(i === q.answer) {
                            labelClass += " correct";
                        } else if (i === userAnswer && !isCorrect) {
                            labelClass += " incorrect";
                        }
                        
                        return `<div class="mt-2"><div class="${labelClass}"><span class="font-mono mr-2">${i + 1}</span> ${opt}</div></div>`;
                    }).join('');

                    detailedResultsHtml += `
                        <div class="question-card">
                            <h4 class="font-semibold text-lg mb-2">${index + 1}. ${isCorrect ? '<span class="text-green-600 font-bold">[정답]</span>' : '<span class="text-red-600 font-bold">[오답]</span>'} ${q.question}</h4>
                            ${q.passage ? `<div class="prose-box"><p>${q.passage}</p></div>` : ''}
                            <div class="space-y-2">${optionsHtml}</div>
                            <div class="mt-4 p-4 bg-gray-50 rounded-md">
                                <p class="font-semibold text-gray-700">해설</p>
                                <p class="text-gray-600 text-sm mt-1">${q.explanation}</p>
                            </div>
                        </div>
                    `;
                });
                
                const resultContainer = document.getElementById('result-container');
                resultContainer.innerHTML = `
                    <div class="question-card text-center">
                        <h2 class="text-3xl font-bold text-gray-800 mb-2">시험 결과: ${name} 학생</h2>
                        <p class="text-6xl font-bold text-indigo-600 my-6">${score}<span class="text-3xl text-gray-500">점</span></p>
                        <p class="text-lg text-gray-700">${questions.length}문제 중 ${correctCount}문제 정답</p>
                        <div id="submission-status"></div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mt-8">
                         <div class="question-card">
                            <h3 class="text-xl font-bold text-gray-800 mb-4">취약점 분석</h3>
                            <div class="space-y-3">
                                <p class="text-gray-700"><strong>가장 많이 틀린 작품:</strong> <span class="font-semibold text-red-600">${weakestWork}</span></p>
                                <p class="text-gray-700"><strong>가장 많이 틀린 유형:</strong> <span class="font-semibold text-red-600">${weakestType}</span></p>
                            </div>
                         </div>
                         <div class="question-card">
                            <h3 class="text-xl font-bold text-gray-800 mb-4">학습 가이드</h3>
                            <p class="text-gray-700">'${weakestWork}' 작품의 핵심 정리 노트를 다시 한번 꼼꼼히 복습하고, '${weakestType}' 유형의 문제 풀이 전략을 보충하는 것이 좋겠습니다. 오답 노트를 작성하여 틀린 문제를 완벽하게 이해하는 것이 중요합니다.</p>
                         </div>
                    </div>

                    <div class="mt-12">${detailedResultsHtml}</div>
                `;
                resultContainer.classList.remove('hidden');
            }

            async function sendDataToGoogleSheet(data) {
                const statusDiv = document.getElementById('submission-status');
                if (!SCRIPT_URL) {
                    console.error("Google Apps Script URL이 설정되지 않았습니다.");
                    if(statusDiv) {
                        statusDiv.textContent = '결과 전송 URL이 설정되지 않았습니다. 관리자에게 문의하세요.';
                        statusDiv.className = 'error';
                        statusDiv.style.display = 'block';
                    }
                    return;
                }

                try {
                    const response = await fetch(SCRIPT_URL, {
                        method: 'POST',
                        body: JSON.stringify(data),
                        headers: {
                            'Content-Type': 'text/plain;charset=utf-8', 
                        },
                    });
                    
                    if(statusDiv) {
                        statusDiv.textContent = '성공적으로 제출되었습니다!';
                        statusDiv.className = 'success';
                        statusDiv.style.display = 'block';
                    }
                } catch (error) {
                     if(statusDiv) {
                        statusDiv.textContent = '제출 중 오류가 발생했습니다. 다시 시도해주세요.';
                        statusDiv.className = 'error';
                        statusDiv.style.display = 'block';
                    }
                    console.error('Error:', error);
                }
            }
            
            function handleSubmit(testId) {
                const studentName = document.getElementById('student-name').value.trim();
                if (!studentName) {
                     const nameInput = document.getElementById('student-name');
                     nameInput.classList.add('border-red-500', 'focus:ring-red-500');
                     nameInput.placeholder = "이름을 먼저 입력해주세요!";
                     nameInput.focus();
                     return;
                }

                const questions = examData[testId].questions;
                const questionElements = document.querySelectorAll('.question-card');
                let score = 0;
                let correctCount = 0;
                const userAnswers = [];
                const analysis = { byWork: {}, byType: {} };

                questionElements.forEach((qEl, index) => {
                    const selected = qEl.querySelector(`input[name="question${index}"]:checked`);
                    const userAnswer = selected ? parseInt(selected.value) : -1;
                    userAnswers.push(userAnswer);
                    
                    const correctAnswer = parseInt(qEl.dataset.answer);
                    const work = qEl.dataset.work;
                    const type = qEl.dataset.type;

                    if (userAnswer === correctAnswer) {
                        correctCount++;
                    } else {
                        analysis.byWork[work] = (analysis.byWork[work] || 0) + 1;
                        analysis.byType[type] = (analysis.byType[type] || 0) + 1;
                    }
                });

                score = Math.round((correctCount / questions.length) * 100);
                
                const findWeakest = (data) => {
                    let weakest = '없음';
                    let maxErrors = 0;
                    for (const key in data) {
                        if (data[key] > maxErrors) {
                            maxErrors = data[key];
                            weakest = key;
                        }
                    }
                    return weakest;
                };

                const weakestWork = findWeakest(analysis.byWork);
                const weakestType = findWeakest(analysis.byType);

                const resultData = {
                    timestamp: new Date().toLocaleString("ko-KR"),
                    studentName: studentName,
                    testTitle: examData[testId].title,
                    score: score,
                    correctCount: correctCount,
                    totalQuestions: questions.length,
                    weakestWork: weakestWork,
                    weakestType: weakestType,
                };
                
                sendDataToGoogleSheet(resultData);

                document.getElementById('test-container').classList.add('hidden');
                renderResults(studentName, score, correctCount, questions, userAnswers, weakestWork, weakestType);
            }

            function switchTab(testId) {
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                const currentTab = document.querySelector(`.tab[data-id="${testId}"]`);
                if(currentTab) currentTab.classList.add('active');

                contentArea.innerHTML = '';
                const test = examData[testId];

                if (test.questions && test.questions.length > 0) {
                    renderTest(testId, test);
                } else {
                    contentArea.innerHTML = `
                        <div class="question-card text-center py-20">
                            <h2 class="text-3xl font-bold text-gray-800 mb-4">${test.title}</h2>
                            <p class="text-gray-600 text-lg">시험지가 준비 중입니다.</p>
                        </div>
                    `;
                }
            }
            
            // --- Initialization ---
            const tests = Object.keys(examData);
            tests.forEach((testId) => {
                const tab = document.createElement('a');
                tab.className = 'tab';
                tab.textContent = examData[testId].title;
                tab.dataset.id = testId;
                tab.addEventListener('click', () => switchTab(testId));
                tabContainer.appendChild(tab);
            });
            
            switchTab('test1');
        });
    </script>
</body>
</html>
